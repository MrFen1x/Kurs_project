{% extends "base.html" %}
{% block content %}
    <!-- Заголовок галереи -->
    <h1 class="mb-4">Галерея изображений</h1>
    {% for config in configs %}
        <!-- Карточка для отображения конфигурации изображения -->
        <div class="card mb-3">
            <div class="card-body">
                <!-- Информация об авторе -->
                <p class="card-text"><strong>Автор:</strong> {{ config.user.username }}</p>
                <!-- Информация о цвете -->
                <p class="card-text"><strong>Цвет:</strong> {{ config.color }}</p>
                <!-- Информация об амплитуде -->
                <p class="card-text"><strong>Амплитуда:</strong> {{ config.amplitude }}</p>
                <!-- Информация о масштабе -->
                <p class="card-text"><strong>Масштаб:</strong> {{ config.scale }}</p>
                <!-- Ссылка для просмотра изображения -->
                <a href="{% url 'image_detail' config.pk %}" class="btn btn-primary">Просмотреть изображение</a>
                <!-- Действия (удаление и редактирование) -->
                <div class="mt-3">
                    {% if user == config.user or user.is_staff %}
                        <!-- Форма для удаления конфигурации (доступна создателю или админу) -->
                        <form method="post" action="{% url 'delete_config' config.pk %}" class="d-inline">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-danger">Удалить</button>
                        </form>
                    {% endif %}
                    {% if user.is_staff %}
                        <!-- Ссылка для редактирования конфигурации (доступна админам) -->
                        <a href="{% url 'edit_config' config.pk %}" class="btn btn-warning ms-2">Редактировать</a>
                    {% endif %}
                </div>
            </div>
        </div>
    {% empty %}
        <!-- Сообщение, если конфигураций нет -->
        <p class="text-muted">Конфигурации не найдены.</p>
    {% endfor %}
{% endblock %}